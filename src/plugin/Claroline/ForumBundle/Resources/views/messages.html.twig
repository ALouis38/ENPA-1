{% extends "ClarolineCoreBundle:Workspace:layout.html.twig" %}
{% block section_content %}
<h2> {{ 'forum'|trans({}, 'forum') }}:
    <a href="{{ path('claro_forum_open', {'instanceId':subjectInstance.getParent().getId() }) }}">
        {{ subjectInstance.getParent().getName() }}
    </a>
</h2>
<h3> {{ 'subject'|trans({}, 'forum') }}: {{ subjectInstance.getResource().getTitle() }} </h3>

<table class="table table-striped table-bordered table-condensed">
    <thead>
        <tr>
            <th>{{ 'subject/author'|trans({}, 'forum') }}</th>
            <th>{{ 'responses'|trans({}, 'forum') }}</th>
        </tr>
    </thead>
    <tbody>
        {% for message in subjectInstance.getResource().getMessages() %}
           <tr>
                <td>
                   <div>
                       <img height="100px" src="{{asset('bundles/clarolinecore/images/workspaces/tools/user.png')}}" />
                   </div>
                   <div>
                       {{ message.getCreator().getUsername() }}<br/>
                       {{ message.getCreationDate()|date('m/d/Y H:i:s') }}
                   </div>
                </td>
                <td>{{ message.getContent()|raw }}
                </td>
           </tr>

        {% endfor %}
     </tbody>
</table>

<a href='{{path('claro_forum_message_form', {'subjectInstanceId':subjectInstance.getId()})}}'
    <button class="btn btn-primary"> {{ 'new_message'|trans({}, 'forum') }} </button>
</a>

{% endblock %}