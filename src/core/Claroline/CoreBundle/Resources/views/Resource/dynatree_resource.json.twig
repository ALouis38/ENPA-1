[
{% set cptroot = 0 %}
{% for root in resources %}
{% set cptchild = 0 %}
{
    "title": "{{ root.getResource().getName() }}",
    "key": {{ root.getId() }},
    "copy": "{{ root.getCopy() }}",
    "instanceCount": {{ root.getResource().getInstanceCount() }},
    "shareType": "{{root.getResource().getShareType()}}",
    "resourceId": "{{root.getResource().getId()}}",
    "type": "{{root.getResource().getResourceType().getType()}}"
    {% if root.getResourceType.getNavigable() == 1 %}
        ,"isFolder": true
        ,"children": [
        {% for child in root.getChildren() %}
            {
                "title": "{{ child.getResource().getName() }}",
                "key": {{ child.getId() }},
                "copy": "{{ child.getCopy() }}",
                "instanceCount": {{ child.getResource().getInstanceCount() }},
                "shareType": "{{child.getResource().getShareType()}}",
                "resourceId": "{{child.getResource().getId()}}",
                "type": "{{child.getResource().getResourceType().getType()}}"
                {% if child.getResourceType.getNavigable() == 1 %}
                ,"isFolder": true
                ,"isLazy": true
                {% endif %}
            }
            {% set cptchild = cptchild + 1 %}
            {% if cptchild < root.getChildren()|length %},{% endif %}
        {% endfor %}
    ]
    {% endif %}
    }
{% set cptroot = cptroot + 1 %}
{% if cptroot < resources|length %},{% endif %}
{% endfor %}
]