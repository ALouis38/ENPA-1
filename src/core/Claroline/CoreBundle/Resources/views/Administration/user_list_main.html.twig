{% extends "ClarolineCoreBundle:Administration:layout.html.twig" %}
{% block javascripts %}
    {{ parent() }}
    <script src='{{ asset('bundles/clarolinecore/js/administration/user_list.js') }}' type="text/javascript"></script>

{% endblock %}
{% block section_content %}
    <h3 id='user-list-block' class="sub-section-header">{{ 'users'|trans({}, 'platform') }}</h3>
    <table id='user-table' class="table table-striped table-bordered table-condensed">
        <thead>
            <tr>
                <th>{{ 'id'|trans({}, 'platform') }}</th>
                <th>{{ 'username'|trans({}, 'platform') }}</th>
                <th>{{ 'last_name'|trans({}, 'platform') }}</th>
                <th>{{ 'first_name'|trans({}, 'platform') }}</th>
                <th>{{ 'mail'|trans({}, 'platform') }}</th>
                <th>{{ 'role'|trans({}, 'platform') }}</th>
                <th>{{ 'delete'|trans({}, 'platform') }}</th>
                <th>{{ 'show'|trans({}, 'platform') }}</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr id="{{ user.getId() }}" class="row-user">
                    <td>{{ user.getId() }}</td>
                    <td>{{ user.getUsername() }}</td>
                    <td>{{ user.getLastName() }}</td>
                    <td>{{ user.getFirstName() }}</td>
                    <td>{{ user.getMail() }}</td>
                    <td>
                        <div>
                            {% for role in user.getOwnedRoles() %}
                                {{ role.getTranslationKey() }}
                                {% if not loop.last %}, {% endif %}
                            {% endfor %}
                        </div>
                    </td>
                    {% if is_granted('user', 'EDIT') %}
                        {% if app.user.id == user.getId() %}
                            <td> - </td>
                        {% else %}
                            <td>
                                <a class="link-delete" id='link-delete-user-{{user.getId()}}'
                                   href="{{ path('claro_admin_delete_user', {'userId': user.getId()}) }}">
                                    {{ 'delete'|trans({}, 'platform') }}
                                </a>
                            </td>
                        {% endif %}
                    {% endif %}
                    <td>
                        <a href="{{ path('claro_profile_view', {'userId': user.getId()}) }}">
                            {{ 'show'|trans({}, 'platform') }}
                        </a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <div id="user-paginator" class="pagination"><ul><li><a class="user-paginator-prev-item" href="#">Prev</a></li>
    {% for i in 0..pages %}
        <li data-page="'+i+'"><a class="user-paginator-item" href="#">{{ i+1 }}</a></li>
    {% endfor %}
    <li><a href="#" class="user-paginator-next-item">Next</a></li>
    </ul>
    </div>
{% endblock %}