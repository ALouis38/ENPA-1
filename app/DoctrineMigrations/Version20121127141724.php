<?php

namespace Application\Migrations;

use Doctrine\DBAL\Migrations\AbstractMigration,
    Doctrine\DBAL\Schema\Schema;

/**
 * Auto-generated Migration: Please modify to your need!
 */
class Version20121127141724 extends AbstractMigration
{
    public function up(Schema $schema)
    {
        // this up() migration is autogenerated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != "mysql");
        
        $this->addSql("DROP TABLE claro_workspace_message");
        $this->addSql("ALTER TABLE claro_resource_type DROP INDEX IDX_AEC62693EC942BCF, ADD UNIQUE INDEX UNIQ_AEC62693EC942BCF (plugin_id)");
        $this->addSql("ALTER TABLE claro_resource_type DROP FOREIGN KEY FK_AEC62693EC942BCF");
        $this->addSql("DROP INDEX UNIQ_AEC626935E237E06 ON claro_resource_type");
        $this->addSql("ALTER TABLE claro_resource_type CHANGE class class VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_resource_type ADD CONSTRAINT FK_AEC62693727ACA70 FOREIGN KEY (parent_id) REFERENCES claro_resource_type (id) ON DELETE SET NULL");
        $this->addSql("ALTER TABLE claro_resource_type ADD CONSTRAINT FK_AEC62693EC942BCF FOREIGN KEY (plugin_id) REFERENCES claro_plugin (id)");
        $this->addSql("CREATE INDEX IDX_AEC62693727ACA70 ON claro_resource_type (parent_id)");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type DROP FOREIGN KEY FK_E5F5418598EC6B7B");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type DROP FOREIGN KEY FK_E5F541858C379371");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type DROP PRIMARY KEY");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type DROP id");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type ADD CONSTRAINT FK_E5F5418598EC6B7B FOREIGN KEY (resource_type_id) REFERENCES claro_resource_type (id)");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type ADD CONSTRAINT FK_E5F541858C379371 FOREIGN KEY (meta_type_id) REFERENCES claro_meta_type (id)");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type ADD PRIMARY KEY (resource_type_id, meta_type_id)");
        $this->addSql("ALTER TABLE claro_resource_icon DROP INDEX IDX_478C58616773D783, ADD UNIQUE INDEX UNIQ_478C58616773D783 (icon_type_id)");
        $this->addSql("ALTER TABLE claro_resource_icon DROP FOREIGN KEY FK_478C58616773D783");
        $this->addSql("ALTER TABLE claro_resource_icon CHANGE icon_location icon_location VARCHAR(255) NOT NULL, CHANGE relative_url relative_url VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_resource_icon ADD CONSTRAINT FK_478C586179F0D498 FOREIGN KEY (shortcut_id) REFERENCES claro_resource_icon (id)");
        $this->addSql("ALTER TABLE claro_resource_icon ADD CONSTRAINT FK_478C58616773D783 FOREIGN KEY (icon_type_id) REFERENCES claro_resource_icon_type (id)");
        $this->addSql("CREATE UNIQUE INDEX UNIQ_478C586179F0D498 ON claro_resource_icon (shortcut_id)");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E082D40A1F");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E0460F904B");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E054B9D732");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E098EC6B7B");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E0A76ED395");
        $this->addSql("ALTER TABLE claro_resource CHANGE workspace_id workspace_id INT DEFAULT NULL, CHANGE icon_id icon_id INT DEFAULT NULL, CHANGE share_type share_type INT NOT NULL, CHANGE path path VARCHAR(3000) DEFAULT NULL, CHANGE lvl lvl INT NOT NULL");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E0727ACA70 FOREIGN KEY (parent_id) REFERENCES claro_resource (id) ON DELETE SET NULL");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E082D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id)");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E0460F904B FOREIGN KEY (license_id) REFERENCES claro_license (id)");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E054B9D732 FOREIGN KEY (icon_id) REFERENCES claro_resource_icon (id)");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E098EC6B7B FOREIGN KEY (resource_type_id) REFERENCES claro_resource_type (id)");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E0A76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id)");
        $this->addSql("CREATE INDEX IDX_F44381E0727ACA70 ON claro_resource (parent_id)");
        $this->addSql("ALTER TABLE claro_link CHANGE id id INT NOT NULL");
        $this->addSql("ALTER TABLE claro_link ADD CONSTRAINT FK_50B267EABF396750 FOREIGN KEY (id) REFERENCES claro_resource (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_meta_type CHANGE name name VARCHAR(50) NOT NULL");
        $this->addSql("DROP INDEX UNIQ_EA81C80BE1F029B6 ON claro_file");
        $this->addSql("ALTER TABLE claro_file CHANGE id id INT NOT NULL, CHANGE hash_name hash_name VARCHAR(36) NOT NULL, CHANGE mime_type mime_type VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_text_revision DROP FOREIGN KEY FK_F61948DEA76ED395");
        $this->addSql("ALTER TABLE claro_text_revision CHANGE content content VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_text_revision ADD CONSTRAINT FK_F61948DE698D3548 FOREIGN KEY (text_id) REFERENCES claro_text (id)");
        $this->addSql("ALTER TABLE claro_text_revision ADD CONSTRAINT FK_F61948DEA76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id)");
        $this->addSql("CREATE INDEX IDX_F61948DE698D3548 ON claro_text_revision (text_id)");
        $this->addSql("ALTER TABLE claro_directory CHANGE id id INT NOT NULL");
        $this->addSql("ALTER TABLE claro_text CHANGE id id INT NOT NULL, CHANGE current_text_id current_text_id INT DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_text ADD CONSTRAINT FK_5D9559DCC380B0CD FOREIGN KEY (current_text_id) REFERENCES claro_text_revision (id)");
        $this->addSql("ALTER TABLE claro_text ADD CONSTRAINT FK_5D9559DCBF396750 FOREIGN KEY (id) REFERENCES claro_resource (id) ON DELETE CASCADE");
        $this->addSql("CREATE UNIQUE INDEX UNIQ_5D9559DCC380B0CD ON claro_text (current_text_id)");
        $this->addSql("ALTER TABLE claro_resource_icon_type CHANGE icon_type icon_type VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_resource_shortcut DROP FOREIGN KEY FK_5E7F4AB889329D25");
        $this->addSql("ALTER TABLE claro_resource_shortcut CHANGE id id INT NOT NULL, CHANGE resource_id resource_id INT DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_resource_shortcut ADD CONSTRAINT FK_5E7F4AB889329D25 FOREIGN KEY (resource_id) REFERENCES claro_resource (id)");
        $this->addSql("ALTER TABLE claro_resource_type_custom_action DROP FOREIGN KEY FK_4A98967B98EC6B7B");
        $this->addSql("ALTER TABLE claro_resource_type_custom_action CHANGE action action VARCHAR(255) NOT NULL, CHANGE async async VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_resource_type_custom_action ADD CONSTRAINT FK_4A98967B98EC6B7B FOREIGN KEY (resource_type_id) REFERENCES claro_resource_type (id)");
        $this->addSql("ALTER TABLE claro_workspace CHANGE is_public is_public TINYINT(1) NOT NULL, CHANGE type type INT NOT NULL");
        $this->addSql("ALTER TABLE claro_workspace ADD CONSTRAINT FK_D9028545727ACA70 FOREIGN KEY (parent_id) REFERENCES claro_workspace (id) ON DELETE SET NULL");
        $this->addSql("CREATE INDEX IDX_D9028545727ACA70 ON claro_workspace (parent_id)");
        $this->addSql("ALTER TABLE claro_workspace_aggregation DROP FOREIGN KEY FK_D012AF0F82D40A1F");
        $this->addSql("ALTER TABLE claro_workspace_aggregation DROP FOREIGN KEY FK_D012AF0FA08DFE7A");
        $this->addSql("ALTER TABLE claro_workspace_aggregation ADD CONSTRAINT FK_D012AF0F82D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id)");
        $this->addSql("ALTER TABLE claro_workspace_aggregation ADD CONSTRAINT FK_D012AF0FA08DFE7A FOREIGN KEY (aggregator_workspace_id) REFERENCES claro_workspace (id)");
        $this->addSql("ALTER TABLE claro_workspace_aggregation ADD PRIMARY KEY (aggregator_workspace_id, workspace_id)");
        $this->addSql("ALTER TABLE claro_role DROP FOREIGN KEY FK_3177747182D40A1F");
        $this->addSql("DROP INDEX UNIQ_317774715E237E06 ON claro_role");
        $this->addSql("ALTER TABLE claro_role CHANGE name name VARCHAR(50) NOT NULL, CHANGE translation_key translation_key VARCHAR(255) NOT NULL, CHANGE role_type role_type INT NOT NULL");
        $this->addSql("ALTER TABLE claro_role ADD CONSTRAINT FK_31777471727ACA70 FOREIGN KEY (parent_id) REFERENCES claro_role (id) ON DELETE SET NULL");
        $this->addSql("ALTER TABLE claro_role ADD CONSTRAINT FK_3177747182D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id)");
        $this->addSql("CREATE INDEX IDX_31777471727ACA70 ON claro_role (parent_id)");
        $this->addSql("ALTER TABLE claro_user DROP INDEX IDX_EB8D285282D40A1F, ADD UNIQUE INDEX UNIQ_EB8D285282D40A1F (workspace_id)");
        $this->addSql("ALTER TABLE claro_user DROP FOREIGN KEY FK_EB8D285282D40A1F");
        $this->addSql("ALTER TABLE claro_user ADD CONSTRAINT FK_EB8D285282D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id)");
        $this->addSql("ALTER TABLE claro_user_group DROP INDEX UNIQ_ED8B34C7A76ED395FE54D947, ADD UNIQUE INDEX primary (user_id, group_id)");
        $this->addSql("ALTER TABLE claro_user_group DROP FOREIGN KEY FK_ED8B34C7FE54D947");
        $this->addSql("ALTER TABLE claro_user_group DROP FOREIGN KEY FK_ED8B34C7A76ED395");
        $this->addSql("ALTER TABLE claro_user_group ADD CONSTRAINT FK_ED8B34C7FE54D947 FOREIGN KEY (group_id) REFERENCES claro_group (id)");
        $this->addSql("ALTER TABLE claro_user_group ADD CONSTRAINT FK_ED8B34C7A76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id)");
        $this->addSql("ALTER TABLE claro_user_role DROP FOREIGN KEY FK_797E43FFD60322AC");
        $this->addSql("ALTER TABLE claro_user_role DROP FOREIGN KEY FK_797E43FFA76ED395");
        $this->addSql("ALTER TABLE claro_user_role ADD CONSTRAINT FK_797E43FFD60322AC FOREIGN KEY (role_id) REFERENCES claro_role (id)");
        $this->addSql("ALTER TABLE claro_user_role ADD CONSTRAINT FK_797E43FFA76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id)");
        $this->addSql("ALTER TABLE claro_user_role ADD PRIMARY KEY (user_id, role_id)");
        $this->addSql("ALTER TABLE claro_widget DROP FOREIGN KEY FK_76CA6C4FEC942BCF");
        $this->addSql("DROP INDEX UNIQ_76CA6C4F5E237E06 ON claro_widget");
        $this->addSql("ALTER TABLE claro_widget ADD CONSTRAINT FK_76CA6C4FEC942BCF FOREIGN KEY (plugin_id) REFERENCES claro_plugin (id)");
        $this->addSql("ALTER TABLE claro_widget_dispay DROP FOREIGN KEY FK_17762F87FBE885E2");
        $this->addSql("ALTER TABLE claro_widget_dispay CHANGE widget_id widget_id INT DEFAULT NULL, CHANGE is_locked is_locked TINYINT(1) NOT NULL");
        $this->addSql("ALTER TABLE claro_widget_dispay ADD CONSTRAINT FK_17762F87727ACA70 FOREIGN KEY (parent_id) REFERENCES claro_widget_dispay (id) ON DELETE SET NULL");
        $this->addSql("ALTER TABLE claro_widget_dispay ADD CONSTRAINT FK_17762F87FBE885E2 FOREIGN KEY (widget_id) REFERENCES claro_widget (id)");
        $this->addSql("CREATE INDEX IDX_17762F87727ACA70 ON claro_widget_dispay (parent_id)");
        $this->addSql("ALTER TABLE claro_resource_logger CHANGE resource_type_id resource_type_id INT DEFAULT NULL, CHANGE workspace_id workspace_id INT DEFAULT NULL, CHANGE url url VARCHAR(255) NOT NULL, CHANGE log_descr log_descr VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_resource_logger ADD CONSTRAINT FK_A156367389329D25 FOREIGN KEY (resource_id) REFERENCES claro_resource (id)");
        $this->addSql("ALTER TABLE claro_resource_logger ADD CONSTRAINT FK_A156367398EC6B7B FOREIGN KEY (resource_type_id) REFERENCES claro_resource_type (id)");
        $this->addSql("ALTER TABLE claro_resource_logger ADD CONSTRAINT FK_A156367382D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id)");
        $this->addSql("CREATE INDEX IDX_A156367389329D25 ON claro_resource_logger (resource_id)");
        $this->addSql("CREATE INDEX IDX_A156367398EC6B7B ON claro_resource_logger (resource_type_id)");
        $this->addSql("CREATE INDEX IDX_A156367382D40A1F ON claro_resource_logger (workspace_id)");
        $this->addSql("DROP INDEX UNIQ_1A5D550B74EE7BD93EE4B093 ON claro_plugin");
        $this->addSql("ALTER TABLE claro_plugin CHANGE has_options has_options VARCHAR(255) NOT NULL");
        $this->addSql("DROP INDEX UNIQ_E7C393D75E237E06 ON claro_group");
        $this->addSql("ALTER TABLE claro_group CHANGE name name VARCHAR(50) NOT NULL");
        $this->addSql("ALTER TABLE claro_group_role DROP FOREIGN KEY FK_1CBA5A40D60322AC");
        $this->addSql("ALTER TABLE claro_group_role DROP FOREIGN KEY FK_1CBA5A40FE54D947");
        $this->addSql("ALTER TABLE claro_group_role ADD CONSTRAINT FK_1CBA5A40D60322AC FOREIGN KEY (role_id) REFERENCES claro_role (id)");
        $this->addSql("ALTER TABLE claro_group_role ADD CONSTRAINT FK_1CBA5A40FE54D947 FOREIGN KEY (group_id) REFERENCES claro_group (id)");
        $this->addSql("ALTER TABLE claro_group_role ADD PRIMARY KEY (group_id, role_id)");
        $this->addSql("ALTER TABLE claro_license CHANGE acronym acronym VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_rssreader_configuration DROP FOREIGN KEY FK_8D6D1C5482D40A1F");
        $this->addSql("ALTER TABLE claro_rssreader_configuration ADD CONSTRAINT FK_8D6D1C54A76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id)");
        $this->addSql("ALTER TABLE claro_rssreader_configuration ADD CONSTRAINT FK_8D6D1C5482D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id)");
        $this->addSql("CREATE INDEX IDX_8D6D1C54A76ED395 ON claro_rssreader_configuration (user_id)");
        $this->addSql("ALTER TABLE claro_example_text CHANGE id id INT NOT NULL, CHANGE text text VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_example_text ADD CONSTRAINT FK_3E01E3AABF396750 FOREIGN KEY (id) REFERENCES claro_resource (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_forum_subject CHANGE id id INT NOT NULL, CHANGE title title VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_forum CHANGE id id INT NOT NULL");
        $this->addSql("ALTER TABLE claro_forum_message CHANGE id id INT NOT NULL, CHANGE content content VARCHAR(255) NOT NULL");
    }

    public function down(Schema $schema)
    {
        // this down() migration is autogenerated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != "mysql");
        
        $this->addSql("CREATE TABLE claro_workspace_message (id INT AUTO_INCREMENT NOT NULL, user_id INT NOT NULL, workspace_id INT NOT NULL, content LONGTEXT NOT NULL, date_creation DATETIME NOT NULL, date_modification DATETIME NOT NULL, last_modif_user_id INT NOT NULL, INDEX IDX_B08B64FD82D40A1F (workspace_id), INDEX IDX_B08B64FDA76ED395 (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB");
        $this->addSql("ALTER TABLE claro_workspace_message ADD CONSTRAINT FK_B08B64FDA76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_workspace_message ADD CONSTRAINT FK_B08B64FD82D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_directory CHANGE id id INT AUTO_INCREMENT NOT NULL");
        $this->addSql("ALTER TABLE claro_example_text DROP FOREIGN KEY FK_3E01E3AABF396750");
        $this->addSql("ALTER TABLE claro_example_text CHANGE id id INT AUTO_INCREMENT NOT NULL, CHANGE text text LONGTEXT NOT NULL");
        $this->addSql("ALTER TABLE claro_file CHANGE id id INT AUTO_INCREMENT NOT NULL, CHANGE hash_name hash_name VARCHAR(50) NOT NULL, CHANGE mime_type mime_type VARCHAR(100) NOT NULL");
        $this->addSql("CREATE UNIQUE INDEX UNIQ_EA81C80BE1F029B6 ON claro_file (hash_name)");
        $this->addSql("ALTER TABLE claro_forum CHANGE id id INT AUTO_INCREMENT NOT NULL");
        $this->addSql("ALTER TABLE claro_forum_message CHANGE id id INT AUTO_INCREMENT NOT NULL, CHANGE content content LONGTEXT NOT NULL");
        $this->addSql("ALTER TABLE claro_forum_subject CHANGE id id INT AUTO_INCREMENT NOT NULL, CHANGE title title VARCHAR(250) NOT NULL");
        $this->addSql("ALTER TABLE claro_group CHANGE name name VARCHAR(255) NOT NULL");
        $this->addSql("CREATE UNIQUE INDEX UNIQ_E7C393D75E237E06 ON claro_group (name)");
        $this->addSql("ALTER TABLE claro_group_role DROP FOREIGN KEY FK_1CBA5A40FE54D947");
        $this->addSql("ALTER TABLE claro_group_role DROP FOREIGN KEY FK_1CBA5A40D60322AC");
        $this->addSql("ALTER TABLE claro_group_role DROP PRIMARY KEY");
        $this->addSql("ALTER TABLE claro_group_role ADD CONSTRAINT FK_1CBA5A40FE54D947 FOREIGN KEY (group_id) REFERENCES claro_group (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_group_role ADD CONSTRAINT FK_1CBA5A40D60322AC FOREIGN KEY (role_id) REFERENCES claro_role (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_license CHANGE acronym acronym VARCHAR(255) DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_link DROP FOREIGN KEY FK_50B267EABF396750");
        $this->addSql("ALTER TABLE claro_link CHANGE id id INT AUTO_INCREMENT NOT NULL");
        $this->addSql("ALTER TABLE claro_meta_type CHANGE name name VARCHAR(255) NOT NULL");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type DROP FOREIGN KEY FK_E5F5418598EC6B7B");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type DROP FOREIGN KEY FK_E5F541858C379371");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type DROP PRIMARY KEY");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type ADD id INT AUTO_INCREMENT NOT NULL");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type ADD CONSTRAINT FK_E5F5418598EC6B7B FOREIGN KEY (resource_type_id) REFERENCES claro_resource_type (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type ADD CONSTRAINT FK_E5F541858C379371 FOREIGN KEY (meta_type_id) REFERENCES claro_meta_type (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_meta_type_resource_type ADD PRIMARY KEY (id)");
        $this->addSql("ALTER TABLE claro_plugin CHANGE has_options has_options TINYINT(1) NOT NULL");
        $this->addSql("CREATE UNIQUE INDEX UNIQ_1A5D550B74EE7BD93EE4B093 ON claro_plugin (vendor_name, short_name)");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E0727ACA70");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E0460F904B");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E098EC6B7B");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E0A76ED395");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E054B9D732");
        $this->addSql("ALTER TABLE claro_resource DROP FOREIGN KEY FK_F44381E082D40A1F");
        $this->addSql("DROP INDEX IDX_F44381E0727ACA70 ON claro_resource");
        $this->addSql("ALTER TABLE claro_resource CHANGE icon_id icon_id INT NOT NULL, CHANGE workspace_id workspace_id INT NOT NULL, CHANGE share_type share_type INT DEFAULT NULL, CHANGE lvl lvl INT DEFAULT NULL, CHANGE path path VARCHAR(1000) DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E0460F904B FOREIGN KEY (license_id) REFERENCES claro_license (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E098EC6B7B FOREIGN KEY (resource_type_id) REFERENCES claro_resource_type (id) ON DELETE SET NULL");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E0A76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E054B9D732 FOREIGN KEY (icon_id) REFERENCES claro_resource_icon (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_resource ADD CONSTRAINT FK_F44381E082D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_resource_icon DROP INDEX UNIQ_478C58616773D783, ADD INDEX IDX_478C58616773D783 (icon_type_id)");
        $this->addSql("ALTER TABLE claro_resource_icon DROP FOREIGN KEY FK_478C586179F0D498");
        $this->addSql("ALTER TABLE claro_resource_icon DROP FOREIGN KEY FK_478C58616773D783");
        $this->addSql("DROP INDEX UNIQ_478C586179F0D498 ON claro_resource_icon");
        $this->addSql("ALTER TABLE claro_resource_icon CHANGE icon_location icon_location VARCHAR(255) DEFAULT NULL, CHANGE relative_url relative_url VARCHAR(255) DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_resource_icon ADD CONSTRAINT FK_478C58616773D783 FOREIGN KEY (icon_type_id) REFERENCES claro_resource_icon_type (id) ON DELETE SET NULL");
        $this->addSql("ALTER TABLE claro_resource_icon_type CHANGE icon_type icon_type LONGTEXT NOT NULL");
        $this->addSql("ALTER TABLE claro_resource_logger DROP FOREIGN KEY FK_A156367389329D25");
        $this->addSql("ALTER TABLE claro_resource_logger DROP FOREIGN KEY FK_A156367398EC6B7B");
        $this->addSql("ALTER TABLE claro_resource_logger DROP FOREIGN KEY FK_A156367382D40A1F");
        $this->addSql("DROP INDEX IDX_A156367389329D25 ON claro_resource_logger");
        $this->addSql("DROP INDEX IDX_A156367398EC6B7B ON claro_resource_logger");
        $this->addSql("DROP INDEX IDX_A156367382D40A1F ON claro_resource_logger");
        $this->addSql("ALTER TABLE claro_resource_logger CHANGE resource_type_id resource_type_id INT NOT NULL, CHANGE workspace_id workspace_id INT NOT NULL, CHANGE url url VARCHAR(255) DEFAULT NULL, CHANGE log_descr log_descr VARCHAR(255) DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_resource_shortcut DROP FOREIGN KEY FK_5E7F4AB889329D25");
        $this->addSql("ALTER TABLE claro_resource_shortcut CHANGE id id INT AUTO_INCREMENT NOT NULL, CHANGE resource_id resource_id INT NOT NULL");
        $this->addSql("ALTER TABLE claro_resource_shortcut ADD CONSTRAINT FK_5E7F4AB889329D25 FOREIGN KEY (resource_id) REFERENCES claro_resource (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_resource_type DROP INDEX UNIQ_AEC62693EC942BCF, ADD INDEX IDX_AEC62693EC942BCF (plugin_id)");
        $this->addSql("ALTER TABLE claro_resource_type DROP FOREIGN KEY FK_AEC62693727ACA70");
        $this->addSql("ALTER TABLE claro_resource_type DROP FOREIGN KEY FK_AEC62693EC942BCF");
        $this->addSql("DROP INDEX IDX_AEC62693727ACA70 ON claro_resource_type");
        $this->addSql("ALTER TABLE claro_resource_type CHANGE class class VARCHAR(255) DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_resource_type ADD CONSTRAINT FK_AEC62693EC942BCF FOREIGN KEY (plugin_id) REFERENCES claro_plugin (id) ON DELETE CASCADE");
        $this->addSql("CREATE UNIQUE INDEX UNIQ_AEC626935E237E06 ON claro_resource_type (name)");
        $this->addSql("ALTER TABLE claro_resource_type_custom_action DROP FOREIGN KEY FK_4A98967B98EC6B7B");
        $this->addSql("ALTER TABLE claro_resource_type_custom_action CHANGE action action VARCHAR(255) DEFAULT NULL, CHANGE async async TINYINT(1) DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_resource_type_custom_action ADD CONSTRAINT FK_4A98967B98EC6B7B FOREIGN KEY (resource_type_id) REFERENCES claro_resource_type (id) ON DELETE SET NULL");
        $this->addSql("ALTER TABLE claro_role DROP FOREIGN KEY FK_31777471727ACA70");
        $this->addSql("ALTER TABLE claro_role DROP FOREIGN KEY FK_3177747182D40A1F");
        $this->addSql("DROP INDEX IDX_31777471727ACA70 ON claro_role");
        $this->addSql("ALTER TABLE claro_role CHANGE name name VARCHAR(255) NOT NULL, CHANGE translation_key translation_key VARCHAR(255) DEFAULT NULL, CHANGE role_type role_type INT DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_role ADD CONSTRAINT FK_3177747182D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id) ON DELETE CASCADE");
        $this->addSql("CREATE UNIQUE INDEX UNIQ_317774715E237E06 ON claro_role (name)");
        $this->addSql("ALTER TABLE claro_rssreader_configuration DROP FOREIGN KEY FK_8D6D1C54A76ED395");
        $this->addSql("ALTER TABLE claro_rssreader_configuration DROP FOREIGN KEY FK_8D6D1C5482D40A1F");
        $this->addSql("DROP INDEX IDX_8D6D1C54A76ED395 ON claro_rssreader_configuration");
        $this->addSql("ALTER TABLE claro_rssreader_configuration ADD CONSTRAINT FK_8D6D1C5482D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_text DROP FOREIGN KEY FK_5D9559DCC380B0CD");
        $this->addSql("ALTER TABLE claro_text DROP FOREIGN KEY FK_5D9559DCBF396750");
        $this->addSql("DROP INDEX UNIQ_5D9559DCC380B0CD ON claro_text");
        $this->addSql("ALTER TABLE claro_text CHANGE id id INT AUTO_INCREMENT NOT NULL, CHANGE current_text_id current_text_id INT NOT NULL");
        $this->addSql("ALTER TABLE claro_text_revision DROP FOREIGN KEY FK_F61948DE698D3548");
        $this->addSql("ALTER TABLE claro_text_revision DROP FOREIGN KEY FK_F61948DEA76ED395");
        $this->addSql("DROP INDEX IDX_F61948DE698D3548 ON claro_text_revision");
        $this->addSql("ALTER TABLE claro_text_revision CHANGE content content LONGTEXT NOT NULL");
        $this->addSql("ALTER TABLE claro_text_revision ADD CONSTRAINT FK_F61948DEA76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id) ON DELETE SET NULL");
        $this->addSql("ALTER TABLE claro_user DROP INDEX UNIQ_EB8D285282D40A1F, ADD INDEX IDX_EB8D285282D40A1F (workspace_id)");
        $this->addSql("ALTER TABLE claro_user DROP FOREIGN KEY FK_EB8D285282D40A1F");
        $this->addSql("ALTER TABLE claro_user ADD CONSTRAINT FK_EB8D285282D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_user_group DROP INDEX primary, ADD UNIQUE INDEX UNIQ_ED8B34C7A76ED395FE54D947 (user_id, group_id)");
        $this->addSql("ALTER TABLE claro_user_group DROP FOREIGN KEY FK_ED8B34C7A76ED395");
        $this->addSql("ALTER TABLE claro_user_group DROP FOREIGN KEY FK_ED8B34C7FE54D947");
        $this->addSql("ALTER TABLE claro_user_group ADD CONSTRAINT FK_ED8B34C7A76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_user_group ADD CONSTRAINT FK_ED8B34C7FE54D947 FOREIGN KEY (group_id) REFERENCES claro_group (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_user_role DROP FOREIGN KEY FK_797E43FFA76ED395");
        $this->addSql("ALTER TABLE claro_user_role DROP FOREIGN KEY FK_797E43FFD60322AC");
        $this->addSql("ALTER TABLE claro_user_role DROP PRIMARY KEY");
        $this->addSql("ALTER TABLE claro_user_role ADD CONSTRAINT FK_797E43FFA76ED395 FOREIGN KEY (user_id) REFERENCES claro_user (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_user_role ADD CONSTRAINT FK_797E43FFD60322AC FOREIGN KEY (role_id) REFERENCES claro_role (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_widget DROP FOREIGN KEY FK_76CA6C4FEC942BCF");
        $this->addSql("ALTER TABLE claro_widget ADD CONSTRAINT FK_76CA6C4FEC942BCF FOREIGN KEY (plugin_id) REFERENCES claro_plugin (id) ON DELETE CASCADE");
        $this->addSql("CREATE UNIQUE INDEX UNIQ_76CA6C4F5E237E06 ON claro_widget (name)");
        $this->addSql("ALTER TABLE claro_widget_dispay DROP FOREIGN KEY FK_17762F87727ACA70");
        $this->addSql("ALTER TABLE claro_widget_dispay DROP FOREIGN KEY FK_17762F87FBE885E2");
        $this->addSql("DROP INDEX IDX_17762F87727ACA70 ON claro_widget_dispay");
        $this->addSql("ALTER TABLE claro_widget_dispay CHANGE widget_id widget_id INT NOT NULL, CHANGE is_locked is_locked TINYINT(1) DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_widget_dispay ADD CONSTRAINT FK_17762F87FBE885E2 FOREIGN KEY (widget_id) REFERENCES claro_widget (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_workspace DROP FOREIGN KEY FK_D9028545727ACA70");
        $this->addSql("DROP INDEX IDX_D9028545727ACA70 ON claro_workspace");
        $this->addSql("ALTER TABLE claro_workspace CHANGE type type INT DEFAULT NULL, CHANGE is_public is_public TINYINT(1) DEFAULT NULL");
        $this->addSql("ALTER TABLE claro_workspace_aggregation DROP FOREIGN KEY FK_D012AF0FA08DFE7A");
        $this->addSql("ALTER TABLE claro_workspace_aggregation DROP FOREIGN KEY FK_D012AF0F82D40A1F");
        $this->addSql("ALTER TABLE claro_workspace_aggregation DROP PRIMARY KEY");
        $this->addSql("ALTER TABLE claro_workspace_aggregation ADD CONSTRAINT FK_D012AF0FA08DFE7A FOREIGN KEY (aggregator_workspace_id) REFERENCES claro_workspace (id) ON DELETE CASCADE");
        $this->addSql("ALTER TABLE claro_workspace_aggregation ADD CONSTRAINT FK_D012AF0F82D40A1F FOREIGN KEY (workspace_id) REFERENCES claro_workspace (id) ON DELETE CASCADE");
    }
}
